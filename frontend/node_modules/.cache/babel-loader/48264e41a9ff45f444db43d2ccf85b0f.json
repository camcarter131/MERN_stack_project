{"ast":null,"code":"class ResourceManager {\n  constructor() {\n    this.resourceCache = {};\n    this.loading = [];\n    this.callbacks = [];\n  }\n\n  load(resource) {\n    if (resource instanceof Array) {\n      resource.forEach(res => this._load(res));\n    } else this._load(resource);\n  }\n\n  _load(url) {\n    if (this.resourceCache[url]) return this.resourceCache[url];else {\n      const img = new Image();\n\n      img.onload = () => {\n        this.resourceCache[url] = img;\n\n        if (this.isReady()) {\n          /*debugger;*/\n          this.callbacks.forEach(cb => {\n            /*debugger; */\n            cb();\n          });\n        }\n      };\n\n      this.resourceCache[url] = false;\n      img.src = url;\n    }\n  }\n\n  get(url) {\n    return this.resourceCache[url];\n  }\n\n  isReady() {\n    let ready = true;\n\n    for (let k in this.resourceCache) {\n      if (this.resourceCache.hasOwnProperty(k) && !this.resourceCache[k]) ready = false;\n    }\n\n    ;\n    return ready;\n  }\n\n  onReady(func) {\n    this.callbacks.push(func);\n  }\n\n}\n\nexport default ResourceManager;","map":{"version":3,"sources":["/home/aseemar/Desktop/JS_Projects/MERN_stack_project/frontend/src/bummerman/resource_manager/resource_manager.js"],"names":["ResourceManager","constructor","resourceCache","loading","callbacks","load","resource","Array","forEach","res","_load","url","img","Image","onload","isReady","cb","src","get","ready","k","hasOwnProperty","onReady","func","push"],"mappings":"AAAA,MAAMA,eAAN,CAAsB;AAClBC,EAAAA,WAAW,GAAI;AACX,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACH;;AAEDC,EAAAA,IAAI,CAAEC,QAAF,EAAY;AACZ,QAAIA,QAAQ,YAAYC,KAAxB,EAA+B;AAC3BD,MAAAA,QAAQ,CAACE,OAAT,CAAiBC,GAAG,IAAI,KAAKC,KAAL,CAAWD,GAAX,CAAxB;AACH,KAFD,MAEO,KAAKC,KAAL,CAAWJ,QAAX;AACV;;AAEDI,EAAAA,KAAK,CAAEC,GAAF,EAAO;AACR,QAAI,KAAKT,aAAL,CAAmBS,GAAnB,CAAJ,EAA6B,OAAO,KAAKT,aAAL,CAAmBS,GAAnB,CAAP,CAA7B,KACK;AACD,YAAMC,GAAG,GAAG,IAAIC,KAAJ,EAAZ;;AACAD,MAAAA,GAAG,CAACE,MAAJ,GAAa,MAAM;AACf,aAAKZ,aAAL,CAAmBS,GAAnB,IAA0BC,GAA1B;;AACA,YAAI,KAAKG,OAAL,EAAJ,EAAoB;AAAC;AAAc,eAAKX,SAAL,CAAeI,OAAf,CAAuBQ,EAAE,IAAI;AAAC;AAAcA,YAAAA,EAAE;AAAG,WAAjD;AAAoD;AAC1F,OAHD;;AAIA,WAAKd,aAAL,CAAmBS,GAAnB,IAA0B,KAA1B;AACAC,MAAAA,GAAG,CAACK,GAAJ,GAAUN,GAAV;AACH;AACJ;;AAEDO,EAAAA,GAAG,CAAEP,GAAF,EAAO;AACN,WAAO,KAAKT,aAAL,CAAmBS,GAAnB,CAAP;AACH;;AAEDI,EAAAA,OAAO,GAAI;AACP,QAAII,KAAK,GAAG,IAAZ;;AACA,SAAK,IAAIC,CAAT,IAAc,KAAKlB,aAAnB,EAAkC;AAC9B,UAAI,KAAKA,aAAL,CAAmBmB,cAAnB,CAAkCD,CAAlC,KAAwC,CAAE,KAAKlB,aAAL,CAAmBkB,CAAnB,CAA9C,EACID,KAAK,GAAG,KAAR;AACP;;AAAA;AACD,WAAOA,KAAP;AACH;;AAEDG,EAAAA,OAAO,CAAEC,IAAF,EAAQ;AACX,SAAKnB,SAAL,CAAeoB,IAAf,CAAoBD,IAApB;AACH;;AAzCiB;;AA4CtB,eAAevB,eAAf","sourcesContent":["class ResourceManager {\n    constructor () {\n        this.resourceCache = {};\n        this.loading = [];\n        this.callbacks = [];\n    }\n\n    load (resource) {\n        if (resource instanceof Array) {\n            resource.forEach(res => this._load(res));\n        } else this._load(resource);\n    }\n\n    _load (url) {\n        if (this.resourceCache[url]) return this.resourceCache[url];\n        else {\n            const img = new Image();\n            img.onload = () => {\n                this.resourceCache[url] = img;\n                if (this.isReady()) {/*debugger;*/ this.callbacks.forEach(cb => {/*debugger; */cb()});}\n            }\n            this.resourceCache[url] = false;\n            img.src = url;\n        }\n    }\n\n    get (url) {\n        return this.resourceCache[url];\n    }\n\n    isReady () {\n        let ready = true;\n        for (let k in this.resourceCache) {\n            if (this.resourceCache.hasOwnProperty(k) && !(this.resourceCache[k]))\n                ready = false;\n        };\n        return ready;\n    }\n\n    onReady (func) {\n        this.callbacks.push(func);\n    }\n}\n\nexport default ResourceManager;"]},"metadata":{},"sourceType":"module"}